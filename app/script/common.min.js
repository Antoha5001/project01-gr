window.addEventListener("DOMContentLoaded",function(){function n(e){function s(e){return""===e.value||void 0===e.value?(e.parentNode.classList.add("error"),!1):(e.parentNode.classList.remove("error"),!0)}this.form=document.getElementById(e.id),this.elements=this.form.elements,this.submit=this.form.getElementsByClassName(e.submit)[0],this.mailer=e.phpScript,this.mailPost=function(){new XMLHttpRequest};for(var t=0;t<this.elements.length;t++)"submit"!==this.elements[t].type&&("file"===this.elements[t].type&&(this.elements[t].parentNode.getElementsByTagName("label")[0],this.elements[t].addEventListener("change",function(){this.parentNode.getElementsByTagName("span")[0].innerHTML=this.files[0].name})),"text"===this.elements[t].type&&this.elements[t].addEventListener("change",function(){s(this)}));this.onSubmit=function(){var i=this;this.submit.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();for(var t,o=new XMLHttpRequest,n=0;n<i.elements.length;n++)if("submit"!==i.elements[n].type&&"text"===i.elements[n].type){if(s(i.elements[n]))continue;return s(i.elements[n]),!1}t=new FormData(i.form),o.open("POST",i.mailer),o.onreadystatechange=function(){4===o.readyState&&o.status},o.send(t),a.close()})},this.onSubmit()}var a=new tingle.modal({cssClass:["form-wrapper"]});new function(e){this.button=document.getElementById(e.button),this.button.addEventListener("click",function(){var o=new XMLHttpRequest;o.open("GET",e.included),o.onreadystatechange=function(e){if(4===o.readyState){a.open(),a.setContent(o.responseText);var t=document.getElementById("modal-form_phone");new Inputmask("+7(999)999-99-99").mask(t),new n({id:"contacts-form",submit:"form-button",phpScript:"assets/templates/script/mailer_top.php"})}},o.send(null)})}({button:"header__button",included:"assets/templates/includes/form-text.html"})});var production_box=document.getElementsByClassName("production-box");$(document).ready(function(){setTimeout(function(){if(void 0!==production_box[0]){var e=$(window).scrollTop();!$(".production__item").hasClass("is-visibile")&&e>$(".production-box").offset().top-$(window).height()&&$(".production__item").each(function(e){setTimeout(function(){$(".production__item").eq(e).addClass("is-visibile")},350*(e+1))})}},500),$(window).scroll(function(){var e=$(window).scrollTop();e>$(".footer").offset().top-$(window).height()+50?$(".footer__logo").addClass("is-visibile"):$(".footer__logo").removeClass("is-visibile"),void 0!==production_box[0]&&e>$(".production-box").offset().top-$(window).height()&&$(".production__item").each(function(e){setTimeout(function(){$(".production__item").eq(e).addClass("is-visibile")},350*(e+1))})})}),$(document).ready(function(){setTimeout(function(){document.getElementsByClassName("header__logo")[0].classList.add("is-visibile")},600),$(".carousel").flickity({cellAlign:"center",contain:!0,wrapAround:!0,autoPlay:5e3,initialIndex:1}),$("#bottom_form").submit(function(){var e=$(this).serialize();$.ajax({type:"POST",url:"/assets/templates/script/form.php",data:e,success:function(){alert("Ваше сообщение отправленно!")}})});var t={items:$(".top-menu__items"),image:$(".top-menu__image"),button:$(".top-menu__button")},o=960;function e(e){e&&Array.prototype.forEach.call(e,function(e){e.offsetTop;var t=document.documentElement,o=t.scrollTop,n=t.clientHeight;e.offsetTop<o+n-(e.offsetHeight+e.parentElement.offsetTop-100)?e.classList.add("is-visible"):e.offsetTop>o+n-(e.offsetHeight+e.parentElement.offsetTop-100)&&e.classList.remove("is-visible")})}$(window).resize(function(){$(this);var e=window.innerWidth;o<e?t.items.attr("style","display:block"):e<o&&t.image.hasClass("clicked")?t.items.attr("style","display:block"):(e<o||e==o)&&t.items.attr("style","display:none")}),t.button.on("click",function(e){e.preventDefault();var t=$(this),o=t.find(".top-menu__image"),n=t.siblings(".top-menu__items");n.children("li");o.hasClass("clicked")?(o.stop(!0,!0).removeClass("clicked"),n.stop(!0,!0).slideUp(200,function(){})):(o.addClass("clicked"),n.stop(!0,!0).slideDown(200))});var n,i,s,a=document.getElementsByClassName("shtamp-box");e(a),window.addEventListener("scroll",function(){e(a)}),s=document.documentElement,new function(e){var t,o=document.getElementById(e.id);t=function(){s.clientHeight<s.scrollTop?o.classList.add("is-visible"):o.classList.remove("is-visible")},window.addEventListener("scroll",t),o.addEventListener("click",function(e){i=s.scrollTop,function e(){n=setTimeout(function(){e()},20),0<i?(s.scrollTo(0,i),i-=100):(clearTimeout(n),s.scrollTo(0,0))}()})}({id:"scroller"}),Modernizr.svg||($(".header__logo > img").attr("src","images/logo.png"),$(".footer__logo > img").attr("src","images/logo_white.png"))});var map,mapLat={lat:53.338819,lng:83.745149},myTitle="ООО «Типография Графика»";function initMap(){map=new google.maps.Map(document.getElementById("map"),{center:mapLat,zoom:17,maxZoom:20,minZoom:10,scrollwheel:!1});new google.maps.Marker({position:mapLat,map:map,title:myTitle,animation:google.maps.Animation.DROP})}